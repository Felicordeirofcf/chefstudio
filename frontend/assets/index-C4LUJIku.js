import{t as ia,c as la,r as n,j as e,S as ca,a as de,b as da,u as me,L as X,T as be,I as ma,C as ue,d as Ne,e as ye,f as we,P as ua,g as Ce,V as pa,h as Se,i as ke,k as ha,l as xa,m as fa,n as ze,R as ga,o as ja,p as Ie,q as Ae,A as Ee,s as Re,X as Te,v as Pe,D as Le,w as va,x as Me,y as Oe,F as Ue,z as Fe,B as ba,U as Na,E as ya,Z as wa,G as Ca,M as Sa,O as ka,H as De,J as _e,K as za,N as Ia,Q as Aa,W as Ve,Y as Ea,_ as Ra,$ as Ta,a0 as Pa,a1 as La,a2 as $e,a3 as Be,a4 as qe,a5 as Ma,a6 as Oa,a7 as Ua,a8 as Fa,a9 as Da,aa as ae}from"./vendor-B-DXLEj-.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const m of l.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&r(m)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function x(...s){return ia(la(s))}const _a=de("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-zinc-950 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 dark:focus-visible:ring-zinc-300",{variants:{variant:{default:"bg-zinc-900 text-zinc-50 shadow hover:bg-zinc-900/90 dark:bg-zinc-50 dark:text-zinc-900 dark:hover:bg-zinc-50/90",destructive:"bg-red-500 text-zinc-50 shadow-sm hover:bg-red-500/90 dark:bg-red-900 dark:text-zinc-50 dark:hover:bg-red-900/90",outline:"border border-zinc-200 bg-white shadow-sm hover:bg-zinc-100 hover:text-zinc-900 dark:border-zinc-800 dark:bg-zinc-950 dark:hover:bg-zinc-800 dark:hover:text-zinc-50",secondary:"bg-zinc-100 text-zinc-900 shadow-sm hover:bg-zinc-100/80 dark:bg-zinc-800 dark:text-zinc-50 dark:hover:bg-zinc-800/80",ghost:"hover:bg-zinc-100 hover:text-zinc-900 dark:hover:bg-zinc-800 dark:hover:text-zinc-50",link:"text-zinc-900 underline-offset-4 hover:underline dark:text-zinc-50"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),z=n.forwardRef(({className:s,variant:a,size:t,asChild:r=!1,...o},l)=>{const m=r?ca:"button";return e.jsx(m,{className:x(_a({variant:a,size:t,className:s})),ref:l,...o})});z.displayName="Button";const f=n.forwardRef(({className:s,type:a,...t},r)=>e.jsx("input",{type:a,className:x("flex h-9 w-full rounded-md border border-zinc-200 bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-zinc-950 placeholder:text-zinc-500 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-zinc-950 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm dark:border-zinc-800 dark:file:text-zinc-50 dark:placeholder:text-zinc-400 dark:focus-visible:ring-zinc-300",s),ref:r,...t}));f.displayName="Input";const Va="https://chefstudio-backend.onrender.com",$a=`${Va.replace(/\/+$/,"")}/api`,Ba=()=>{try{const s=localStorage.getItem("userInfo");return s?JSON.parse(s).token:null}catch{return localStorage.removeItem("userInfo"),null}},U=da.create({baseURL:$a});U.interceptors.request.use(s=>{const a=Ba();return a&&(s.headers.Authorization=`Bearer ${a}`),s},s=>Promise.reject(s));const qa=async s=>{var a,t;try{const r=await U.post("/auth/register",s),{token:o,_id:l,name:m,email:u,metaUserId:i,metaConnectionStatus:c,plan:h}=r.data||{};if(!o||!l)throw new Error("Registro mal sucedido: token ou dados do usuário ausentes.");const j={token:o,_id:l,name:m,email:u,metaUserId:i,metaConnectionStatus:c,plan:h,isMetaConnected:c==="connected"};return localStorage.setItem("userInfo",JSON.stringify(j)),j}catch(r){throw new Error(((t=(a=r.response)==null?void 0:a.data)==null?void 0:t.message)||"Erro ao registrar usuário.")}},Ja=async s=>{var a,t;try{const r=await U.post("/auth/login",s),{token:o,_id:l,name:m,email:u,metaUserId:i,metaConnectionStatus:c,plan:h}=r.data||{};if(!o||!l)throw new Error("Login mal sucedido: token ou dados do usuário ausentes.");const j={token:o,_id:l,name:m,email:u,metaUserId:i,metaConnectionStatus:c,plan:h,isMetaConnected:c==="connected"};return localStorage.setItem("userInfo",JSON.stringify(j)),j}catch(r){throw new Error(((t=(a=r.response)==null?void 0:a.data)==null?void 0:t.message)||"Erro ao fazer login.")}},Je=()=>localStorage.removeItem("userInfo"),Y=async()=>{var s,a,t;try{return(await U.get("/auth/profile")).data}catch(r){throw((s=r.response)==null?void 0:s.status)===401&&Je(),new Error(((t=(a=r.response)==null?void 0:a.data)==null?void 0:t.message)||"Erro ao buscar perfil.")}},Wa=async s=>{var a,t;try{const r=await U.put("/auth/profile",s),l={...JSON.parse(localStorage.getItem("userInfo")||"{}"),...r.data};return localStorage.setItem("userInfo",JSON.stringify(l)),r.data}catch(r){throw new Error(((t=(a=r.response)==null?void 0:a.data)==null?void 0:t.message)||"Erro ao atualizar perfil.")}},Ga=async s=>{var a,t;try{const r=await U.put("/auth/plan",s),o=JSON.parse(localStorage.getItem("userInfo")||"{}");return o.plan=r.data.plan,localStorage.setItem("userInfo",JSON.stringify(o)),r.data}catch(r){throw new Error(((t=(a=r.response)==null?void 0:a.data)==null?void 0:t.message)||"Erro ao atualizar plano.")}},Ka=async()=>{try{return(await U.get("/menu")).data}catch(s){return console.error("Erro ao buscar itens do cardápio (API Real):",s),[{_id:"ph1",name:"Falha ao carregar Burger",price:0,imageUrl:"/placeholder-burger1.jpg"},{_id:"ph2",name:"Falha ao carregar Pizza",price:0,imageUrl:"/placeholder-pizza2.jpg"}]}},Ha=async s=>{var a,t;try{return(await U.post("/ads/campaigns",s)).data}catch(r){throw new Error(((t=(a=r.response)==null?void 0:a.data)==null?void 0:t.message)||"Erro ao criar campanha de anúncios.")}};function Za(){const s=me(),[a,t]=n.useState(""),[r,o]=n.useState(""),[l,m]=n.useState(null),[u,i]=n.useState(!1),c="/image.png",h=async j=>{j.preventDefault(),m(null),i(!0);try{const p=await Ja({email:a,password:r});if(!(p!=null&&p.token)||!(p!=null&&p.email))throw new Error("Login mal sucedido: token ou dados do usuário ausentes.");localStorage.setItem("userInfo",JSON.stringify({token:p.token,_id:p._id,name:p.name,email:p.email,metaUserId:p.metaUserId,metaConnectionStatus:p.metaConnectionStatus,isMetaConnected:p.metaConnectionStatus==="connected"})),p.metaConnectionStatus==="connected"?s("/dashboard"):s("/connect-meta")}catch(p){console.error("Erro no login:",p.message),m(p.message||"Falha ao fazer login. Verifique suas credenciais."),localStorage.removeItem("userInfo")}finally{i(!1)}};return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-50",children:e.jsxs("div",{className:"flex w-full max-w-4xl bg-white rounded-lg shadow-xl overflow-hidden mx-4 sm:mx-0",children:[e.jsx("div",{className:"w-1/2 hidden md:block relative",children:e.jsx("img",{src:c,alt:"Chef sorrindo",className:"object-cover w-full h-full"})}),e.jsxs("div",{className:"w-full md:w-1/2 p-8 sm:p-12 flex flex-col justify-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-center mb-4 text-gray-800",children:"Bem vindo(a)"}),e.jsx("p",{className:"text-center text-gray-500 mb-10",children:"Faça login para continuar"}),e.jsxs("form",{onSubmit:h,className:"space-y-5",children:[e.jsx(f,{id:"email",type:"email",placeholder:"E-mail",required:!0,value:a,onChange:j=>t(j.target.value)}),e.jsx(f,{id:"password",type:"password",placeholder:"Senha",required:!0,value:r,onChange:j=>o(j.target.value)}),l&&e.jsx("p",{className:"text-red-500 text-sm text-center",children:l}),e.jsx(z,{type:"submit",disabled:u,className:"w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-md font-semibold transition duration-300 disabled:opacity-50",children:u?"Entrando...":"ENTRAR"})]}),e.jsx("div",{className:"mt-8 text-center",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Não tem uma conta?"," ",e.jsx(X,{to:"/register",className:"text-purple-600 hover:underline font-medium",children:"Crie uma agora"})]})})]})]})})}const We=ga,Ge=ja,pe=n.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(be,{ref:r,className:x("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-zinc-200 bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-white placeholder:text-zinc-500 focus:outline-none focus:ring-1 focus:ring-zinc-950 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 dark:border-zinc-800 dark:ring-offset-zinc-950 dark:placeholder:text-zinc-400 dark:focus:ring-zinc-300",s),...t,children:[a,e.jsx(ma,{asChild:!0,children:e.jsx(ue,{className:"h-4 w-4 opacity-50"})})]}));pe.displayName=be.displayName;const Ke=n.forwardRef(({className:s,...a},t)=>e.jsx(Ne,{ref:t,className:x("flex cursor-default items-center justify-center py-1",s),...a,children:e.jsx(ye,{className:"h-4 w-4"})}));Ke.displayName=Ne.displayName;const He=n.forwardRef(({className:s,...a},t)=>e.jsx(we,{ref:t,className:x("flex cursor-default items-center justify-center py-1",s),...a,children:e.jsx(ue,{className:"h-4 w-4"})}));He.displayName=we.displayName;const he=n.forwardRef(({className:s,children:a,position:t="popper",...r},o)=>e.jsx(ua,{children:e.jsxs(Ce,{ref:o,className:x("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-zinc-200 bg-white text-zinc-950 shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 dark:border-zinc-800 dark:bg-zinc-950 dark:text-zinc-50",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:t,...r,children:[e.jsx(Ke,{}),e.jsx(pa,{className:x("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:a}),e.jsx(He,{})]})}));he.displayName=Ce.displayName;const Qa=n.forwardRef(({className:s,...a},t)=>e.jsx(Se,{ref:t,className:x("px-2 py-1.5 text-sm font-semibold",s),...a}));Qa.displayName=Se.displayName;const R=n.forwardRef(({className:s,children:a,...t},r)=>e.jsxs(ke,{ref:r,className:x("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-zinc-100 focus:text-zinc-900 data-[disabled]:pointer-events-none data-[disabled]:opacity-50 dark:focus:bg-zinc-800 dark:focus:text-zinc-50",s),...t,children:[e.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(ha,{children:e.jsx(xa,{className:"h-4 w-4"})})}),e.jsx(fa,{children:a})]}));R.displayName=ke.displayName;const Xa=n.forwardRef(({className:s,...a},t)=>e.jsx(ze,{ref:t,className:x("-mx-1 my-1 h-px bg-zinc-100 dark:bg-zinc-800",s),...a}));Xa.displayName=ze.displayName;const Ya=1,es=1e6;let se=0;function as(){return se=(se+1)%Number.MAX_SAFE_INTEGER,se.toString()}const te=new Map,je=s=>{if(te.has(s))return;const a=setTimeout(()=>{te.delete(s),W({type:"REMOVE_TOAST",toastId:s})},es);te.set(s,a)},ss=(s,a)=>{switch(a.type){case"ADD_TOAST":return{...s,toasts:[a.toast,...s.toasts].slice(0,Ya)};case"UPDATE_TOAST":return{...s,toasts:s.toasts.map(t=>t.id===a.toast.id?{...t,...a.toast}:t)};case"DISMISS_TOAST":{const{toastId:t}=a;return t?je(t):s.toasts.forEach(r=>{je(r.id)}),{...s,toasts:s.toasts.map(r=>r.id===t||t===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return a.toastId===void 0?{...s,toasts:[]}:{...s,toasts:s.toasts.filter(t=>t.id!==a.toastId)}}},Z=[];let Q={toasts:[]};function W(s){Q=ss(Q,s),Z.forEach(a=>{a(Q)})}function ts({...s}){const a=as(),t=o=>W({type:"UPDATE_TOAST",toast:{...o,id:a}}),r=()=>W({type:"DISMISS_TOAST",toastId:a});return W({type:"ADD_TOAST",toast:{...s,id:a,open:!0,onOpenChange:o=>{o||r()}}}),{id:a,dismiss:r,update:t}}function D(){const[s,a]=n.useState(Q);return n.useEffect(()=>(Z.push(a),()=>{const t=Z.indexOf(a);t>-1&&Z.splice(t,1)}),[s]),{...s,toast:ts,dismiss:t=>W({type:"DISMISS_TOAST",toastId:t})}}const rs=va,Ze=n.forwardRef(({className:s,...a},t)=>e.jsx(Ie,{ref:t,className:x("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...a}));Ze.displayName=Ie.displayName;const ns=de("group pointer-events-auto relative flex w-full items-center justify-between space-x-2 overflow-hidden rounded-md border border-zinc-200 p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full dark:border-zinc-800",{variants:{variant:{default:"border bg-white text-zinc-950 dark:bg-zinc-950 dark:text-zinc-50",destructive:"destructive group border-red-500 bg-red-500 text-zinc-50 dark:border-red-900 dark:bg-red-900 dark:text-zinc-50"}},defaultVariants:{variant:"default"}}),Qe=n.forwardRef(({className:s,variant:a,...t},r)=>e.jsx(Ae,{ref:r,className:x(ns({variant:a}),s),...t}));Qe.displayName=Ae.displayName;const os=n.forwardRef(({className:s,...a},t)=>e.jsx(Ee,{ref:t,className:x("inline-flex h-8 shrink-0 items-center justify-center rounded-md border border-zinc-200 bg-transparent px-3 text-sm font-medium transition-colors hover:bg-zinc-100 focus:outline-none focus:ring-1 focus:ring-zinc-950 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-zinc-100/40 group-[.destructive]:hover:border-red-500/30 group-[.destructive]:hover:bg-red-500 group-[.destructive]:hover:text-zinc-50 group-[.destructive]:focus:ring-red-500 dark:border-zinc-800 dark:hover:bg-zinc-800 dark:focus:ring-zinc-300 dark:group-[.destructive]:border-zinc-800/40 dark:group-[.destructive]:hover:border-red-900/30 dark:group-[.destructive]:hover:bg-red-900 dark:group-[.destructive]:hover:text-zinc-50 dark:group-[.destructive]:focus:ring-red-900",s),...a}));os.displayName=Ee.displayName;const Xe=n.forwardRef(({className:s,...a},t)=>e.jsx(Re,{ref:t,className:x("absolute right-1 top-1 rounded-md p-1 text-zinc-950/50 opacity-0 transition-opacity hover:text-zinc-950 focus:opacity-100 focus:outline-none focus:ring-1 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600 dark:text-zinc-50/50 dark:hover:text-zinc-50",s),"toast-close":"",...a,children:e.jsx(Te,{className:"h-4 w-4"})}));Xe.displayName=Re.displayName;const Ye=n.forwardRef(({className:s,...a},t)=>e.jsx(Pe,{ref:t,className:x("text-sm font-semibold [&+div]:text-xs",s),...a}));Ye.displayName=Pe.displayName;const ea=n.forwardRef(({className:s,...a},t)=>e.jsx(Le,{ref:t,className:x("text-sm opacity-90",s),...a}));ea.displayName=Le.displayName;function aa(){const{toasts:s}=D();return e.jsxs(rs,{children:[s.map(function({id:a,title:t,description:r,action:o,...l}){return e.jsxs(Qe,{...l,children:[e.jsxs("div",{className:"grid gap-1",children:[t&&e.jsx(Ye,{children:t}),r&&e.jsx(ea,{children:r})]}),o,e.jsx(Xe,{})]},a)}),e.jsx(Ze,{})]})}function is(){const s=me(),{toast:a}=D(),[t,r]=n.useState(""),[o,l]=n.useState(""),[m,u]=n.useState(""),[i,c]=n.useState(""),[h,j]=n.useState(""),[p,y]=n.useState(""),[I,N]=n.useState(""),[S,g]=n.useState(""),[w,G]=n.useState(""),[K,H]=n.useState(""),[$,M]=n.useState(null),[B,k]=n.useState(!1),q="/image.png",_=async v=>{if(v.preventDefault(),M(null),m!==i){M("As senhas não coincidem.");return}if(m.length<6){M("A senha deve ter pelo menos 6 caracteres.");return}if(!t||!o||!h||!p||!I){M("Preencha todos os campos obrigatórios.");return}if(!/^\(?\d{2}\)?\s?\d{4,5}-?\d{4}$/.test(I)){M("Formato de WhatsApp inválido (ex: (11) 98765-4321).");return}k(!0);try{const C=await qa({name:t,email:o,password:m,establishmentName:h,businessType:p,whatsapp:I,menuLink:S,address:w,cep:K});if(!(C!=null&&C.token)||!(C!=null&&C.email))throw new Error("Erro no cadastro: resposta incompleta.");localStorage.setItem("userInfo",JSON.stringify({token:C.token,_id:C._id,name:C.name,email:C.email,metaUserId:C.metaUserId,metaConnectionStatus:C.metaConnectionStatus,isMetaConnected:C.metaConnectionStatus==="connected"})),a({title:"Cadastro realizado!",description:"Sua conta foi criada com sucesso."}),C.metaConnectionStatus==="connected"?s("/dashboard"):s("/connect-meta")}catch(O){console.error("Falha ao registrar:",O),M(O.message||"Erro ao registrar. Verifique os dados."),a({title:"Erro no Cadastro",description:O.message||"Não foi possível criar sua conta.",variant:"destructive"}),localStorage.removeItem("userInfo")}finally{k(!1)}};return e.jsxs("div",{className:"flex items-center justify-center min-h-screen bg-gray-50 py-12",children:[e.jsxs("div",{className:"flex w-full max-w-4xl bg-white rounded-lg shadow-xl overflow-hidden mx-4 sm:mx-0",children:[e.jsx("div",{className:"w-1/2 hidden md:block relative",children:e.jsx("img",{src:q,alt:"ChefiaStudio Cadastro",className:"object-cover w-full h-full"})}),e.jsxs("div",{className:"w-full md:w-1/2 p-6 sm:p-10 flex flex-col justify-center",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold text-center mb-3 text-gray-800",children:"Crie sua Conta"}),e.jsx("p",{className:"text-center text-gray-500 mb-6",children:"Preencha os dados abaixo para começar."}),e.jsxs("form",{onSubmit:_,className:"space-y-3",children:[e.jsx(f,{id:"name",type:"text",placeholder:"Nome do Responsável *",value:t,onChange:v=>r(v.target.value),required:!0}),e.jsx(f,{id:"email",type:"email",placeholder:"E-mail *",value:o,onChange:v=>l(v.target.value),required:!0}),e.jsx(f,{id:"password",type:"password",placeholder:"Senha *",value:m,onChange:v=>u(v.target.value),required:!0}),e.jsx(f,{id:"confirmPassword",type:"password",placeholder:"Confirmar Senha *",value:i,onChange:v=>c(v.target.value),required:!0}),e.jsx(f,{id:"establishmentName",type:"text",placeholder:"Nome do Estabelecimento *",value:h,onChange:v=>j(v.target.value),required:!0}),e.jsxs(We,{value:p,onValueChange:y,required:!0,children:[e.jsx(pe,{className:"text-gray-500",children:e.jsx(Ge,{placeholder:"Tipo de Negócio *"})}),e.jsxs(he,{children:[e.jsx(R,{value:"Restaurante",children:"Restaurante"}),e.jsx(R,{value:"Pizzaria",children:"Pizzaria"}),e.jsx(R,{value:"Hamburgueria",children:"Hamburgueria"}),e.jsx(R,{value:"Bar",children:"Bar"}),e.jsx(R,{value:"Cafeteria",children:"Cafeteria"}),e.jsx(R,{value:"Outro",children:"Outro"})]})]}),e.jsx(f,{id:"whatsapp",type:"text",placeholder:"WhatsApp *",value:I,onChange:v=>N(v.target.value),required:!0}),e.jsx(f,{id:"menuLink",type:"url",placeholder:"Link do Cardápio (Opcional)",value:S,onChange:v=>g(v.target.value)}),e.jsx(f,{id:"address",type:"text",placeholder:"Endereço (Opcional)",value:w,onChange:v=>G(v.target.value)}),e.jsx(f,{id:"cep",type:"text",placeholder:"CEP (Opcional)",value:K,onChange:v=>H(v.target.value)}),$&&e.jsx("p",{className:"text-red-500 text-xs text-center py-2",children:$}),e.jsx(z,{type:"submit",disabled:B,className:"w-full bg-purple-600 hover:bg-purple-700 text-white py-3 rounded-md font-semibold transition duration-300 disabled:opacity-50 mt-4",children:B?"Registrando...":"REGISTRAR"})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Já tem uma conta?"," ",e.jsx(X,{to:"/",className:"text-purple-600 hover:underline font-medium",children:"Faça login"})]})})]})]}),e.jsx(aa,{})]})}function ls(){const{toast:s}=D(),[a,t]=n.useState(!1),[r,o]=n.useState(null),l=async()=>{t(!0),o(null);try{const m=localStorage.getItem("userInfo");if(!m)throw new Error("Usuário não autenticado.");const{token:u,_id:i}=JSON.parse(m);if(!u||!i)throw new Error("Token ou ID do usuário não encontrado. Faça login novamente.");const h=`${"https://chefstudio-backend.onrender.com".replace(/\/+$/,"")||"https://chefstudio-production.up.railway.app"}/api/meta/login?token=${encodeURIComponent(u)}&userId=${encodeURIComponent(i)}`;window.location.href=h}catch(m){const u=(m==null?void 0:m.message)||"Erro inesperado ao conectar com Meta.";console.error("❌ Erro ao conectar com Meta:",u),o(u),s({title:"Erro",description:u,variant:"destructive"}),t(!1)}};return e.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:e.jsxs("div",{className:"bg-white p-8 sm:p-12 rounded-lg shadow-xl max-w-md w-full text-center mx-4 sm:mx-0",children:[e.jsx("div",{className:"mx-auto mb-6 h-32 w-32 flex items-center justify-center bg-purple-100 rounded-full",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,"aria-hidden":"true",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),e.jsx("h2",{className:"text-2xl font-bold mb-3 text-gray-800",children:"Quase lá..."}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Para criar campanhas automaticamente, conecte sua conta Meta Ads."}),r&&e.jsx("p",{className:"text-red-500 text-sm mb-4",children:r}),e.jsx(z,{onClick:l,disabled:a,className:"w-full bg-gradient-to-r from-pink-500 to-purple-600 hover:from-pink-600 hover:to-purple-700 text-white py-3 rounded-md font-semibold transition duration-300 disabled:opacity-50",children:a?"Redirecionando...":"Conectar Instagram / Facebook"})]})})}const re=n.forwardRef(({className:s,...a},t)=>e.jsx(Me,{ref:t,className:x("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...a}));re.displayName=Me.displayName;const ne=n.forwardRef(({className:s,...a},t)=>e.jsx(Oe,{ref:t,className:x("aspect-square h-full w-full",s),...a}));ne.displayName=Oe.displayName;const oe=n.forwardRef(({className:s,...a},t)=>e.jsx(Ue,{ref:t,className:x("flex h-full w-full items-center justify-center rounded-full bg-zinc-100 dark:bg-zinc-800",s),...a}));oe.displayName=Ue.displayName;const cs=()=>{var y,I;const s=me(),a=Fe(),{toast:t}=D(),[r,o]=n.useState(null),[l,m]=n.useState(!1),[u,i]=n.useState(!0);n.useEffect(()=>{(async()=>{try{const S=await Y();o(S)}catch(S){console.error("Failed to fetch profile for layout:",S)}})()},[]);const c=()=>{Je(),t({title:"Logout realizado",description:"Você foi desconectado com sucesso."}),s("/")},h=[{name:"Meu Perfil",path:"/dashboard/profile",icon:Na},{name:"Planos",path:"/dashboard/plans",icon:ya},{name:"Conectar com Ads",path:"/connect-meta",icon:wa}],j=N=>a.pathname===N||N==="/dashboard/profile"&&a.pathname.startsWith("/dashboard/profile")||N==="/dashboard/plans"&&a.pathname.startsWith("/dashboard/plans")||N==="/connect-meta"&&a.pathname==="/connect-meta",p=()=>h.some(N=>j(N.path));return e.jsxs("div",{className:"min-h-screen flex bg-gray-100",children:[e.jsxs("aside",{className:`bg-purple-800 text-white w-64 space-y-6 py-7 px-2 absolute inset-y-0 left-0 transform ${l?"translate-x-0":"-translate-x-full"} md:relative md:translate-x-0 transition duration-200 ease-in-out z-30 shadow-lg flex flex-col`,children:[e.jsxs("div",{className:"flex items-center justify-between px-4",children:[e.jsx(X,{to:"/dashboard",className:"text-white text-2xl font-semibold uppercase hover:text-gray-300",children:"ChefiaStudio"}),e.jsx("button",{onClick:()=>m(!1),className:"md:hidden p-1 rounded-md text-gray-300 hover:bg-purple-700",children:e.jsx(Te,{size:24})})]}),e.jsxs("nav",{className:"flex-grow",children:[e.jsxs("button",{onClick:()=>i(!u),className:`w-full flex items-center justify-between py-2.5 px-4 rounded transition duration-200 hover:bg-purple-700 hover:text-white ${p()?"bg-purple-700":""}`,children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(ba,{className:"mr-3",size:20}),"Gerenciamento"]}),u?e.jsx(ye,{size:20}):e.jsx(ue,{size:20})]}),u&&e.jsx("div",{className:"pl-4 mt-1 space-y-1",children:h.map(N=>e.jsxs(X,{to:N.path,onClick:()=>m(!1),className:`flex items-center py-2 px-4 rounded transition duration-200 hover:bg-purple-600 hover:text-white ${j(N.path)?"bg-purple-600 font-semibold":"text-purple-100"}`,children:[e.jsx(N.icon,{className:"mr-3",size:18}),N.name]},N.name))})]}),e.jsx("div",{className:"px-4 pb-4",children:e.jsxs(z,{variant:"ghost",onClick:c,className:"w-full flex items-center justify-start text-gray-300 hover:bg-purple-700 hover:text-white",children:[e.jsx(Ca,{className:"mr-3",size:20}),"Sair"]})})]}),e.jsxs("div",{className:"flex-1 flex flex-col",children:[e.jsxs("header",{className:"bg-white shadow-md p-4 flex justify-between items-center sticky top-0 z-20 md:hidden",children:[e.jsx("button",{onClick:()=>m(!0),className:"text-gray-600 p-1 rounded-md hover:bg-gray-100",children:e.jsx(Sa,{size:24})}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:"text-sm text-gray-700",children:(r==null?void 0:r.name)||"Usuário"}),e.jsxs(re,{children:[e.jsx(ne,{src:"https://github.com/shadcn.png",alt:"User Avatar"}),e.jsx(oe,{children:((y=r==null?void 0:r.name)==null?void 0:y.charAt(0))||"U"})]})]})]}),e.jsx("header",{className:"bg-white shadow-md p-4 hidden md:flex justify-end items-center sticky top-0 z-20",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"text-sm text-gray-700",children:["Olá, ",(r==null?void 0:r.name)||"Usuário"]}),e.jsxs(re,{children:[e.jsx(ne,{src:"https://github.com/shadcn.png",alt:"User Avatar"}),e.jsx(oe,{children:((I=r==null?void 0:r.name)==null?void 0:I.charAt(0))||"U"})]})]})}),e.jsx("main",{className:"flex-1 bg-gray-100 overflow-y-auto",children:e.jsx(ka,{})})]})]})},ds=de("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),b=n.forwardRef(({className:s,...a},t)=>e.jsx(De,{ref:t,className:x(ds(),s),...a}));b.displayName=De.displayName;const ie=n.forwardRef(({className:s,...a},t)=>e.jsxs(_e,{ref:t,className:x("relative flex w-full touch-none select-none items-center",s),...a,children:[e.jsx(za,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-zinc-900/20 dark:bg-zinc-50/20",children:e.jsx(Ia,{className:"absolute h-full bg-zinc-900 dark:bg-zinc-50"})}),e.jsx(Aa,{className:"block h-4 w-4 rounded-full border border-zinc-200 border-zinc-900/50 bg-white shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-zinc-950 disabled:pointer-events-none disabled:opacity-50 dark:border-zinc-800 dark:border-zinc-50/50 dark:bg-zinc-950 dark:focus-visible:ring-zinc-300"})]}));ie.displayName=_e.displayName;const E=n.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:x("rounded-xl border border-zinc-200 bg-white text-zinc-950 shadow dark:border-zinc-800 dark:bg-zinc-950 dark:text-zinc-50",s),...a}));E.displayName="Card";const T=n.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:x("flex flex-col space-y-1.5 p-6",s),...a}));T.displayName="CardHeader";const P=n.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:x("font-semibold leading-none tracking-tight",s),...a}));P.displayName="CardTitle";const V=n.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:x("text-sm text-zinc-500 dark:text-zinc-400",s),...a}));V.displayName="CardDescription";const L=n.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:x("p-6 pt-0",s),...a}));L.displayName="CardContent";const ms=n.forwardRef(({className:s,...a},t)=>e.jsx("div",{ref:t,className:x("flex items-center p-6 pt-0",s),...a}));ms.displayName="CardFooter";delete Ve.Icon.Default.prototype._getIconUrl;Ve.Icon.Default.mergeOptions({iconRetinaUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png",iconUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png",shadowUrl:"https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png"});const us=({center:s,radiusKm:a})=>{const t=La();return n.useEffect(()=>{t.setView(s,t.getZoom())},[s,a,t]),null},ps=({radiusKm:s,center:a=[-23.5505,-46.6333]})=>{const t=s*1e3;return e.jsxs(Ea,{center:a,zoom:13,scrollWheelZoom:!1,style:{height:"300px",width:"100%",borderRadius:"8px",marginBottom:"1rem"},children:[e.jsx(Ra,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(Ta,{position:a}),e.jsx(Pa,{center:a,radius:t,pathOptions:{color:"purple",fillColor:"purple",fillOpacity:.2}}),e.jsx(us,{center:a,radiusKm:s})]})},hs=Ma,sa=n.forwardRef(({className:s,...a},t)=>e.jsx($e,{ref:t,className:x("inline-flex h-9 items-center justify-center rounded-lg bg-zinc-100 p-1 text-zinc-500 dark:bg-zinc-800 dark:text-zinc-400",s),...a}));sa.displayName=$e.displayName;const le=n.forwardRef(({className:s,...a},t)=>e.jsx(Be,{ref:t,className:x("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-white transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-white data-[state=active]:text-zinc-950 data-[state=active]:shadow dark:ring-offset-zinc-950 dark:focus-visible:ring-zinc-300 dark:data-[state=active]:bg-zinc-950 dark:data-[state=active]:text-zinc-50",s),...a}));le.displayName=Be.displayName;const ce=n.forwardRef(({className:s,...a},t)=>e.jsx(qe,{ref:t,className:x("mt-2 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-zinc-950 focus-visible:ring-offset-2 dark:ring-offset-zinc-950 dark:focus-visible:ring-zinc-300",s),...a}));ce.displayName=qe.displayName;const xs=({imageUrl:s,name:a})=>e.jsx(E,{className:"overflow-hidden",children:e.jsx("img",{src:s||"/placeholder-image.svg",alt:a||"Produto",className:"w-full h-32 object-cover"})});function fs(){const{toast:s}=D(),[a,t]=n.useState(null),[r,o]=n.useState(5),[l,m]=n.useState(70),[u,i]=n.useState(!1),[c,h]=n.useState(null),[j,p]=n.useState(""),[y,I]=n.useState(""),[N,S]=n.useState(""),[g,w]=n.useState(""),[G,K]=n.useState(null),[H,$]=n.useState([]),[M,B]=n.useState(!0),[k,q]=n.useState("link"),[_,v]=n.useState(""),[O,C]=n.useState(null),[xe,fe]=n.useState(!1),[ee,ge]=n.useState(null);n.useEffect(()=>{const d=async()=>{B(!0);try{const A=await Y();t(A),A&&A.metaAdAccountId&&I(A.metaAdAccountId);const F=await Ka();$(F.slice(0,4))}catch(A){console.error("Failed to fetch initial data:",A),$([{id:"ph1",name:"Placeholder Burger 1",imageUrl:"/placeholder-burger1.jpg"},{id:"ph2",name:"Placeholder Pizza 2",imageUrl:"/placeholder-pizza2.jpg"},{id:"ph3",name:"Placeholder Sushi 3",imageUrl:"/placeholder-sushi3.jpg"},{id:"ph4",name:"Placeholder Sobremesa 4",imageUrl:"/placeholder-sobremesa4.jpg"}]),s({title:"Erro",description:"Não foi possível carregar os dados do perfil ou cardápio.",variant:"destructive"})}finally{B(!1)}};d(),new URLSearchParams(window.location.search).get("meta_connected")==="true"&&(s({title:"Sucesso!",description:"Sua conta Meta Ads foi conectada com sucesso.",variant:"default"}),d(),window.history.replaceState({},document.title,window.location.pathname))},[s]);const ta=d=>{d.target.files&&d.target.files[0]&&K(d.target.files[0])},ra=async()=>{var d,J;if(!y||!j){s({title:"Campos Obrigatórios",description:"Por favor, preencha o Nome da Campanha e o ID da Conta de Anúncios.",variant:"destructive"}),h("Nome da Campanha e ID da Conta de Anúncios são obrigatórios.");return}i(!0),h(null);try{const F=await Ha({adAccountId:y,name:j,objective:"LINK_CLICKS",status:"PAUSED",budgetValue:l,radiusValue:r,publicationLinkValue:N,adTextValue:g});h(F.message||"Campanha manual criada com sucesso!"),s({title:"Sucesso!",description:F.message||"Campanha manual criada com sucesso!"}),setTimeout(()=>h(null),5e3)}catch(A){const F=((J=(d=A==null?void 0:A.response)==null?void 0:d.data)==null?void 0:J.message)||A.message||"Falha ao criar campanha manual.";h(F),s({title:"Erro",description:F,variant:"destructive"})}finally{i(!1)}},na=async()=>{fe(!0),ge("Processando com IA..."),await new Promise(J=>setTimeout(J,2500));let d="Anúncio incrível gerado por IA!";k==="link"&&_?d=`Anúncio para o cardápio em ${_}: Experimente nossas delícias!`:O&&(d=`Anúncio baseado no arquivo ${O.name}: Ofertas especiais hoje!`),ge(`Simulação de Anúncio Gerado: "${d}" (Este é um resultado simulado)`),s({title:"IA Concluído (Simulado)",description:"Conteúdo do anúncio simulado gerado."}),fe(!1)},oa=d=>{d.target.files&&d.target.files[0]&&C(d.target.files[0])};return e.jsxs("div",{className:"p-4 sm:p-8 space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:[e.jsxs(E,{children:[e.jsx(T,{children:e.jsx(P,{className:"text-sm font-medium",children:"Métrica 1"})}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"1,234"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"+10% vs mês passado"})]})]}),e.jsxs(E,{children:[e.jsx(T,{children:e.jsx(P,{className:"text-sm font-medium",children:"Métrica 2"})}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"R$ 567"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"+5% vs mês passado"})]})]}),e.jsxs(E,{children:[e.jsx(T,{children:e.jsx(P,{className:"text-sm font-medium",children:"Métrica 3"})}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"89"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"-2% vs mês passado"})]})]}),e.jsxs(E,{children:[e.jsx(T,{children:e.jsx(P,{className:"text-sm font-medium",children:"Métrica 4"})}),e.jsxs(L,{children:[e.jsx("div",{className:"text-2xl font-bold",children:"9.8"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"+1% vs mês passado"})]})]})]}),e.jsxs(hs,{defaultValue:"manual",className:"w-full",children:[e.jsxs(sa,{className:"grid w-full grid-cols-2",children:[e.jsx(le,{value:"manual",children:"Criar Anúncio Manualmente"}),e.jsx(le,{value:"ia",children:"Criar Anúncio com IA (Simulado)"})]}),e.jsx(ce,{value:"manual",children:e.jsxs(E,{className:"shadow-lg mt-4",children:[e.jsxs(T,{children:[e.jsx(P,{className:"text-xl sm:text-2xl",children:"Configurações da Campanha Manual"}),e.jsx(V,{children:"Defina os parâmetros para sua campanha de anúncios no Meta Ads."})]}),e.jsxs(L,{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsx(ps,{radiusKm:r}),e.jsxs(b,{htmlFor:"radius-slider-manual",children:["Raio de Alcance (",r," Km)"]}),e.jsx(ie,{id:"radius-slider-manual",min:1,max:50,step:1,value:[r],onValueChange:d=>o(d[0]),className:"mt-2"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"campaign-name",children:"Nome da Campanha *"}),e.jsx(f,{id:"campaign-name",placeholder:"Ex: Campanha de Verão",value:j,onChange:d=>p(d.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"ad-account-id",children:"ID da Conta de Anúncios (act_xxxxxxxxxx) *"}),e.jsx(f,{id:"ad-account-id",placeholder:"Conecte ao Meta Ads para carregar ou insira manualmente",value:y,onChange:d=>I(d.target.value),className:"mt-1",readOnly:!!(a&&a.metaAdAccountId)}),!(a&&a.metaAdAccountId)&&e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Você encontra o ID da sua conta de anúncios no Gerenciador de Anúncios do Facebook ou conecte sua conta Meta."}),a&&a.metaAdAccountId&&e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"ID da Conta de Anúncios carregado automaticamente."})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"budget-input-manual",children:"Orçamento semanal (R$)"}),e.jsx(f,{id:"budget-input-manual",type:"number",value:l,onChange:d=>m(Number(d.target.value)),min:"10",className:"mt-1"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Para melhores resultados recomendamos um orçamento mínimo semanal de R$70."})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"publication-link",children:"Link da Publicação (Opcional)"}),e.jsx(f,{id:"publication-link",type:"url",placeholder:"https://facebook.com/suapagina/posts/123...",value:N,onChange:d=>S(d.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"ad-creative-text",children:"Texto do Anúncio"}),e.jsx(f,{id:"ad-creative-text",placeholder:"Ex: Promoção especial esta semana!",value:g,onChange:d=>w(d.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"ad-image-upload",children:"Imagem/Vídeo do Anúncio"}),e.jsx(f,{id:"ad-image-upload",type:"file",onChange:ta,className:"mt-1"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Faça upload da imagem ou vídeo para seu anúncio."})]}),e.jsxs("div",{className:"text-sm space-y-1 text-gray-700",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Alcance Estimado:"})," ",5e3.toLocaleString("pt-BR")," - ",7500 .toLocaleString("pt-BR")," pessoas"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Cliques Estimados:"})," ",350," - ",450]})]}),e.jsx(z,{onClick:ra,disabled:u,className:"w-full bg-blue-600 hover:bg-blue-700 text-white",children:u?"Criando Campanha Manual...":"Criar Campanha Manual no Meta Ads"}),c&&e.jsx("p",{className:`mt-2 text-sm ${c.includes("Falha")||c.includes("Erro")||c.includes("obrigatórios")?"text-red-500":"text-green-600"}`,children:c})]})]})]})}),e.jsx(ce,{value:"ia",children:e.jsxs(E,{className:"shadow-lg mt-4",children:[e.jsxs(T,{children:[e.jsx(P,{className:"text-xl sm:text-2xl",children:"Criar Anúncio com Assistência de IA (Simulado)"}),e.jsx(V,{children:"Forneça seu cardápio e deixe nossa IA (simulada) criar uma sugestão de anúncio."})]}),e.jsxs(L,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(b,{children:"Como você quer fornecer seu cardápio?"}),e.jsxs("div",{className:"flex space-x-4 mt-2",children:[e.jsx(z,{variant:k==="link"?"default":"outline",onClick:()=>q("link"),children:"Link"}),e.jsx(z,{variant:k==="image"?"default":"outline",onClick:()=>q("image"),children:"Imagem"}),e.jsx(z,{variant:k==="pdf"?"default":"outline",onClick:()=>q("pdf"),children:"PDF"})]})]}),k==="link"&&e.jsxs("div",{children:[e.jsx(b,{htmlFor:"ia-ad-link",children:"Link do Cardápio"}),e.jsx(f,{id:"ia-ad-link",type:"url",placeholder:"https://seurestaurante.com/cardapio",value:_,onChange:d=>v(d.target.value),className:"mt-1"})]}),(k==="image"||k==="pdf")&&e.jsxs("div",{children:[e.jsxs(b,{htmlFor:"ia-ad-file",children:["Arquivo do Cardápio (",k==="image"?"Imagem":"PDF",")"]}),e.jsx(f,{id:"ia-ad-file",type:"file",accept:k==="image"?"image/*":".pdf",onChange:oa,className:"mt-1"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 pt-4",children:[e.jsxs("div",{children:[e.jsxs(b,{htmlFor:"radius-slider-ia",children:["Raio de Alcance (",r," Km)"]}),e.jsx(ie,{id:"radius-slider-ia",min:1,max:50,step:1,value:[r],onValueChange:d=>o(d[0]),className:"mt-2"})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"budget-input-ia",children:"Orçamento semanal (R$)"}),e.jsx(f,{id:"budget-input-ia",type:"number",value:l,onChange:d=>m(Number(d.target.value)),min:"10",className:"mt-1"})]})]}),e.jsx(z,{onClick:na,disabled:xe||k==="link"&&!_||k!=="link"&&!O,className:"w-full bg-purple-600 hover:bg-purple-700 text-white",children:xe?"Gerando com IA...":"Gerar Anúncio com IA (Simulado)"}),ee&&e.jsx("p",{className:`mt-2 text-sm ${ee.includes("Processando")?"text-blue-500":"text-green-600"}`,children:ee})]})]})})]}),e.jsxs(E,{className:"shadow-lg",children:[e.jsxs(T,{children:[e.jsx(P,{className:"text-xl sm:text-2xl",children:"Produtos Anunciados (Exemplo)"}),e.jsx(V,{children:"Estes são exemplos de produtos que podem ser destacados em seus anúncios."})]}),e.jsx(L,{children:M?e.jsx("p",{children:"Carregando produtos..."}):H.length>0?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:H.map(d=>e.jsx(xs,{imageUrl:d.imageUrl,name:d.name},d.id))}):e.jsx("p",{children:"Nenhum produto de exemplo encontrado."})})]})]})}const gs=()=>{const{toast:s}=D(),[a,t]=n.useState(null),[r,o]=n.useState(!0),[l,m]=n.useState(!1),[u,i]=n.useState({name:"",email:"",establishmentName:"",businessType:"",whatsapp:"",menuLink:"",address:"",cep:""}),[c,h]=n.useState(null),[j,p]=n.useState(!1);n.useEffect(()=>{(async()=>{o(!0);try{const g=await Y();t(g),i({name:g.name||"",email:g.email||"",establishmentName:g.establishmentName||"",businessType:g.businessType||"",whatsapp:g.whatsapp||"",menuLink:g.menuLink||"",address:g.address||"",cep:g.cep||""})}catch(g){console.error("Failed to fetch user profile:",g),s({title:"Erro ao carregar perfil",description:g.message||"Não foi possível buscar seus dados.",variant:"destructive"})}finally{o(!1)}})()},[s]);const y=S=>{const{name:g,value:w}=S.target;i(G=>({...G,[g]:w}))},I=S=>{i(g=>({...g,businessType:S}))},N=async S=>{S.preventDefault(),p(!0),h(null);try{const g={...u},w=await Wa(g);t(w),i({name:w.name||"",email:w.email||"",establishmentName:w.establishmentName||"",businessType:w.businessType||"",whatsapp:w.whatsapp||"",menuLink:w.menuLink||"",address:w.address||"",cep:w.cep||""}),m(!1),s({title:"Sucesso!",description:"Seu perfil foi atualizado."})}catch(g){console.error("Failed to update profile:",g),h(g.message||"Não foi possível salvar as alterações."),s({title:"Erro ao salvar",description:g.message||"Não foi possível salvar as alterações.",variant:"destructive"})}finally{p(!1)}};return e.jsxs(E,{className:"shadow-lg",children:[e.jsxs(T,{className:"flex flex-row justify-between items-start",children:[e.jsxs("div",{children:[e.jsx(P,{className:"text-xl sm:text-2xl",children:"Meu Perfil"}),e.jsx(V,{children:"Gerencie suas informações pessoais e do estabelecimento."})]}),!l&&!r&&e.jsx(z,{variant:"outline",onClick:()=>m(!0),children:"Editar Perfil"})]}),e.jsx(L,{children:r?e.jsx("p",{children:"Carregando perfil..."}):a?l?e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{className:"grid sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"profileName",children:"Nome do Responsável"}),e.jsx(f,{id:"profileName",name:"name",value:u.name||"",onChange:y,required:!0})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"profileEmail",children:"Email"}),e.jsx(f,{id:"profileEmail",name:"email",type:"email",value:u.email||"",onChange:y,required:!0})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"profileAddress",children:"Endereço"}),e.jsx(f,{id:"profileAddress",name:"address",value:u.address||"",onChange:y,placeholder:"Rua Exemplo, 123"})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"profileCep",children:"CEP"}),e.jsx(f,{id:"profileCep",name:"cep",value:u.cep||"",onChange:y,placeholder:"12345-678"})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"profileEstablishmentName",children:"Nome do Estabelecimento"}),e.jsx(f,{id:"profileEstablishmentName",name:"establishmentName",value:u.establishmentName||"",onChange:y,required:!0})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"profileBusinessType",children:"Tipo de Negócio"}),e.jsxs(We,{name:"businessType",value:u.businessType||"",onValueChange:I,children:[e.jsx(pe,{id:"profileBusinessType",children:e.jsx(Ge,{placeholder:"Selecione o tipo"})}),e.jsxs(he,{children:[e.jsx(R,{value:"Restaurante",children:"Restaurante"}),e.jsx(R,{value:"Bar",children:"Bar"}),e.jsx(R,{value:"Cafeteria",children:"Cafeteria"}),e.jsx(R,{value:"Delivery",children:"Delivery"}),e.jsx(R,{value:"Outro",children:"Outro"})]})]})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"profileWhatsapp",children:"WhatsApp"}),e.jsx(f,{id:"profileWhatsapp",name:"whatsapp",value:u.whatsapp||"",onChange:y,placeholder:"(11) 99999-8888",required:!0})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"profileMenuLink",children:"Link do Cardápio (Opcional)"}),e.jsx(f,{id:"profileMenuLink",name:"menuLink",value:u.menuLink||"",onChange:y,placeholder:"https://seu.cardapio/online"})]})]}),c&&e.jsx("p",{className:"text-red-500 text-sm mt-4",children:c}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(z,{type:"button",variant:"outline",onClick:()=>{m(!1),h(null),i({name:a.name||"",email:a.email||"",establishmentName:a.establishmentName||"",businessType:a.businessType||"",whatsapp:a.whatsapp||"",menuLink:a.menuLink||"",address:a.address||"",cep:a.cep||""})},children:"Cancelar"}),e.jsx(z,{type:"submit",disabled:j,children:j?"Salvando...":"Salvar Alterações"})]})]}):e.jsxs("div",{className:"space-y-2 text-sm text-gray-700 grid sm:grid-cols-2 gap-x-4 gap-y-2",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Nome Responsável:"})," ",a.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",a.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Endereço:"})," ",a.address||"Não informado"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"CEP:"})," ",a.cep||"Não informado"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Estabelecimento:"})," ",a.establishmentName||"Não informado"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Tipo:"})," ",a.businessType||"Não informado"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"WhatsApp:"})," ",a.whatsapp||"Não informado"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Cardápio:"})," ",a.menuLink?e.jsx("a",{href:a.menuLink,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:underline",children:a.menuLink}):"Não informado"]})]}):e.jsx("p",{className:"text-red-500",children:"Não foi possível carregar os dados do perfil."})})]})},js=[{name:"Gratuito",adsLimit:1,price:0,billingCycle:"N/A"},{name:"3 Anúncios",adsLimit:3,price:100,billingCycle:"mensal"},{name:"5 Anúncios",adsLimit:5,price:300,billingCycle:"mensal"}],vs=()=>{const{toast:s}=D(),[a,t]=n.useState(null),[r,o]=n.useState(!0),[l,m]=n.useState(!1);n.useEffect(()=>{(async()=>{o(!0);try{const h=await Y();t(h)}catch(h){console.error("Failed to fetch user profile for plans:",h),s({title:"Erro ao carregar plano atual",description:h.message||"Não foi possível buscar seus dados.",variant:"destructive"})}finally{o(!1)}})()},[s]);const u=async c=>{var j;const h=(j=a==null?void 0:a.plan)==null?void 0:j.name;if(!(!a||h===c)){m(!0);try{const p=await Ga({planName:c});t(y=>y?{...y,plan:p.plan}:null),s({title:"Sucesso!",description:p.message||`Plano atualizado para ${c}.`})}catch(p){console.error("Failed to update plan:",p),s({title:"Erro ao atualizar plano",description:p.message||"Não foi possível alterar seu plano.",variant:"destructive"})}finally{m(!1)}}},i=a==null?void 0:a.plan;return e.jsxs(E,{className:"shadow-lg",children:[e.jsxs(T,{children:[e.jsx(P,{className:"text-xl sm:text-2xl",children:"Planos"}),e.jsx(V,{children:"Visualize seu plano atual e explore outras opções."})]}),e.jsxs(L,{className:"space-y-6",children:[r?e.jsx("p",{children:"Carregando plano atual..."}):i?e.jsxs("div",{className:"p-4 border rounded-md bg-purple-50 border-purple-200",children:[e.jsxs("h3",{className:"font-semibold text-lg mb-2",children:["Plano Atual: ",i.name]}),e.jsxs("p",{className:"text-sm text-gray-700",children:["Limite de Anúncios: ",i.adsLimit]}),e.jsxs("p",{className:"text-sm text-gray-700",children:["Preço: R$ ",i.price.toFixed(2)," / ",i.billingCycle]})]}):e.jsx("p",{className:"text-red-500",children:"Não foi possível carregar os dados do plano atual."}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-3",children:"Opções de Planos"}),e.jsx("div",{className:"grid sm:grid-cols-3 gap-4",children:js.map(c=>e.jsxs(E,{className:`flex flex-col justify-between p-4 border ${(i==null?void 0:i.name)===c.name?"border-purple-500 ring-2 ring-purple-300":"border-gray-200 hover:shadow-md"}`,children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-1",children:c.name}),e.jsxs("p",{className:"text-xs text-gray-600 mb-2",children:["Até ",c.adsLimit," anúncio(s) simultâneo(s)"]}),e.jsxs("p",{className:"text-lg font-bold",children:["R$ ",c.price.toFixed(2),c.billingCycle!=="N/A"&&e.jsxs("span",{className:"text-sm font-normal text-gray-500",children:[" / ",c.billingCycle]})]})]}),e.jsx(z,{onClick:()=>u(c.name),disabled:l||(i==null?void 0:i.name)===c.name,variant:(i==null?void 0:i.name)===c.name?"secondary":"default",size:"sm",className:"mt-4 w-full",children:l&&(i==null?void 0:i.name)!==c.name?"Alterando...":(i==null?void 0:i.name)===c.name?"Plano Atual":"Selecionar Plano"})]},c.name))})]})]})]})},bs=()=>{const s=localStorage.getItem("userInfo");if(!s)return null;try{return JSON.parse(s)}catch{return localStorage.removeItem("userInfo"),null}},ve=({children:s})=>{const a=bs(),t=Fe();return!a||!a.token?e.jsx(ae,{to:"/",state:{from:t},replace:!0}):a.metaConnectionStatus!=="connected"&&t.pathname!=="/connect-meta"?e.jsx(ae,{to:"/connect-meta",state:{from:t},replace:!0}):a.metaConnectionStatus==="connected"&&t.pathname==="/connect-meta"?e.jsx(ae,{to:"/dashboard",replace:!0}):s},Ns=Oa([{path:"/",element:e.jsx(Za,{})},{path:"/register",element:e.jsx(is,{})},{path:"/connect-meta",element:e.jsx(ve,{children:e.jsx(ls,{})})},{path:"/dashboard",element:e.jsx(ve,{children:e.jsx(cs,{})}),children:[{index:!0,element:e.jsx(fs,{})},{path:"profile",element:e.jsx(gs,{})},{path:"plans",element:e.jsx(vs,{})}]}]);Ua.createRoot(document.getElementById("root")).render(e.jsxs(Fa.StrictMode,{children:[e.jsx(Da,{router:Ns}),e.jsx(aa,{})]}));
